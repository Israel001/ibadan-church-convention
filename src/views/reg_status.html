<!DOCTYPE html>
<html lang="en">



<head>

    <meta charset="utf-8" />
    <title>Convention | Registration status</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@7.1.96/css/materialdesignicons.min.css
    " rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- <link rel="stylesheet" type="text/css" href=".././bootstrap/css/bootstrap.min.css" /> -->
    <link rel="stylesheet" type="text/css" href="../../font-awesome/css/font-awesome.min.css" />

    <script type="text/javascript" src="../../jss/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="../../bootstrap/js/bootstrap.min.js"></script>


    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Bootstrap Admin </title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="../../vendors/feather/feather.css">
    <link rel="stylesheet" href="../../vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="../../vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="../../vendors/typicons/typicons.css">
    <link rel="stylesheet" href="../../vendors/simple-line-icons/css/simple-line-icons.css">
    <link rel="stylesheet" href="../../vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="../../css/style.css">
    <!-- endinject -->
    <link rel="shortcut icon" href="../../images/favicon.png" />
</head>
<style>
    .table-responsive {
        margin: 30px 0;
    }
    
    .table-wrapper {
        background: #fff;
        padding: 20px 25px;
        border-radius: 3px;
        min-width: 1000px;
        box-shadow: 0 1px 1px rgba(0, 0, 0, .05);
    }
    
    .table-title {
        padding-bottom: 15px;
        background: #435d7d;
        color: #fff;
        padding: 16px 30px;
        min-width: 100%;
        margin: -20px -25px 10px;
        border-radius: 3px 3px 0 0;
    }
    
    .table-title h2 {
        margin: 5px 0 0;
        font-size: 24px;
    }
    
    .table-title .btn-group {
        float: right;
    }
    
    .table-title .btn {
        color: #fff;
        float: right;
        font-size: 13px;
        border: none;
        min-width: 50px;
        border-radius: 2px;
        border: none;
        outline: none !important;
        margin-left: 10px;
    }
    
    .table-title .btn i {
        float: left;
        font-size: 21px;
        margin-right: 5px;
    }
    
    .table-title .btn span {
        float: left;
        margin-top: 2px;
    }
    
    table.table tr th,
    table.table tr td {
        border-color: #e9e9e9;
        padding: 12px 15px;
        vertical-align: middle;
    }
    
    table.table tr th:first-child {
        width: 60px;
    }
    
    table.table tr th:last-child {
        width: 100px;
    }
    
    table.table-striped tbody tr:nth-of-type(odd) {
        background-color: #fcfcfc;
    }
    
    table.table-striped.table-hover tbody tr:hover {
        background: #f5f5f5;
    }
    
    table.table th i {
        font-size: 13px;
        margin: 0 5px;
        cursor: pointer;
    }
    
    table.table td:last-child i {
        opacity: 0.9;
        font-size: 22px;
        margin: 0 5px;
    }
    
    table.table td a {
        font-weight: bold;
        color: #566787;
        display: inline-block;
        text-decoration: none;
        outline: none !important;
    }
    
    table.table td a:hover {
        color: #2196F3;
    }
    
    table.table td a.edit {
        color: #FFC107;
    }
    
    table.table td a.delete {
        color: #F44336;
    }
    
    table.table td i {
        font-size: 19px;
    }
    
    table.table .avatar {
        border-radius: 50%;
        vertical-align: middle;
        margin-right: 10px;
    }
    
    .pagination {
        float: right;
        margin: 0 0 5px;
    }
    
    .pagination li a {
        border: none;
        font-size: 13px;
        min-width: 30px;
        min-height: 30px;
        color: #999;
        margin: 0 2px;
        line-height: 30px;
        border-radius: 2px !important;
        text-align: center;
        padding: 0 6px;
    }
    
    .pagination li a:hover {
        color: #666;
    }
    
    .pagination li.active a,
    .pagination li.active a.page-link {
        background: #03A9F4;
    }
    
    .pagination li.active a:hover {
        background: #0397d6;
    }
    
    .pagination li.disabled i {
        color: #ccc;
    }
    
    .pagination li i {
        font-size: 16px;
        padding-top: 6px
    }
    
    .hint-text {
        float: left;
        margin-top: 10px;
        font-size: 13px;
    }
    /* Custom checkbox */
    
    .custom-checkbox {
        position: relative;
    }
    
    .custom-checkbox input[type="checkbox"] {
        opacity: 0;
        position: absolute;
        margin: 5px 0 0 3px;
        z-index: 9;
    }
    
    .custom-checkbox label:before {
        width: 18px;
        height: 18px;
    }
    
    .custom-checkbox label:before {
        content: '';
        margin-right: 10px;
        display: inline-block;
        vertical-align: text-top;
        background: white;
        border: 1px solid #bbb;
        border-radius: 2px;
        box-sizing: border-box;
        z-index: 2;
    }
    
    .custom-checkbox input[type="checkbox"]:checked+label:after {
        content: '';
        position: absolute;
        left: 6px;
        top: 3px;
        width: 6px;
        height: 11px;
        border: solid #000;
        border-width: 0 3px 3px 0;
        transform: inherit;
        z-index: 3;
        transform: rotateZ(45deg);
    }
    
    .custom-checkbox input[type="checkbox"]:checked+label:before {
        border-color: #03A9F4;
        background: #03A9F4;
    }
    
    .custom-checkbox input[type="checkbox"]:checked+label:after {
        border-color: #fff;
    }
    
    .custom-checkbox input[type="checkbox"]:disabled+label:before {
        color: #b8b8b8;
        cursor: auto;
        box-shadow: none;
        background: #ddd;
    }
    /* Modal styles */
    
    .modal .modal-dialog {
        max-width: 400px;
    }
    
    .modal .modal-header,
    .modal .modal-body,
    .modal .modal-footer {
        padding: 20px 30px;
    }
    
    .modal .modal-content {
        border-radius: 3px;
        font-size: 14px;
    }
    
    .modal .modal-footer {
        background: #ecf0f1;
        border-radius: 0 0 3px 3px;
    }
    
    .modal .modal-title {
        display: inline-block;
    }
    
    .modal .form-control {
        border-radius: 2px;
        box-shadow: none;
        border-color: #dddddd;
    }
    
    .modal textarea.form-control {
        resize: vertical;
    }
    
    .modal .btn {
        border-radius: 2px;
        min-width: 100px;
    }
    
    .modal form label {
        font-weight: normal;
    }
</style>
<script>
    $(document).ready(function() {
        // Activate tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // Select/Deselect checkboxes
        var checkbox = $('table tbody input[type="checkbox"]');
        $("#selectAll").click(function() {
            if (this.checked) {
                checkbox.each(function() {
                    this.checked = true;
                });
            } else {
                checkbox.each(function() {
                    this.checked = false;
                });
            }
        });
        checkbox.click(function() {
            if (!this.checked) {
                $("#selectAll").prop("checked", false);
            }
        });
    });
</script>

<%- include('./partials/_body.html'); %>
    
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
        <!-- partial:../../partials/_settings-panel.html -->
        
        <div id="right-sidebar" class="settings-panel">
            <i class="settings-close ti-close"></i>
            <ul class="nav nav-tabs border-top" id="setting-panel" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="todo-tab" data-bs-toggle="tab" href="#todo-section" role="tab" aria-controls="todo-section" aria-expanded="true">TO DO LIST</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="chats-tab" data-bs-toggle="tab" href="#chats-section" role="tab" aria-controls="chats-section">CHATS</a>
                </li>
            </ul>
            <div class="tab-content" id="setting-content">
                <div class="tab-pane fade show active scroll-wrapper" id="todo-section" role="tabpanel" aria-labelledby="todo-section">
                    <div class="add-items d-flex px-3 mb-0">
                        <form class="form w-100">
                            <div class="form-group d-flex">
                                <input type="text" class="form-control todo-list-input" placeholder="Add To-do">
                                <button type="submit" class="add btn btn-primary todo-list-add-btn" id="add-task">Add</button>
                            </div>
                        </form>
                    </div>
                    <div class="list-wrapper px-3">
                        <ul class="d-flex flex-column-reverse todo-list">
                            <li>
                                <div class="form-check">
                                    <label class="form-check-label">
                      <input class="checkbox" type="checkbox">
                      Team review meeting at 3.00 PM
                    </label>
                                </div>
                                <i class="remove ti-close"></i>
                            </li>
                            <li>
                                <div class="form-check">
                                    <label class="form-check-label">
                      <input class="checkbox" type="checkbox">
                      Prepare for presentation
                    </label>
                                </div>
                                <i class="remove ti-close"></i>
                            </li>
                            <li>
                                <div class="form-check">
                                    <label class="form-check-label">
                      <input class="checkbox" type="checkbox">
                      Resolve all the low priority tickets due today
                    </label>
                                </div>
                                <i class="remove ti-close"></i>
                            </li>
                            <li class="completed">
                                <div class="form-check">
                                    <label class="form-check-label">
                      <input class="checkbox" type="checkbox" checked>
                      Schedule meeting for next week
                    </label>
                                </div>
                                <i class="remove ti-close"></i>
                            </li>
                            <li class="completed">
                                <div class="form-check">
                                    <label class="form-check-label">
                      <input class="checkbox" type="checkbox" checked>
                      Project review
                    </label>
                                </div>
                                <i class="remove ti-close"></i>
                            </li>
                        </ul>
                    </div>
                    <h4 class="px-3 text-muted mt-5 fw-light mb-0">Events</h4>
                    <div class="events pt-4 px-3">
                        <div class="wrapper d-flex mb-2">
                            <i class="ti-control-record text-primary me-2"></i>
                            <span>Feb 11 2018</span>
            </div>
            <p class="mb-0 font-weight-thin text-gray">Creating component page build a js</p>
            <p class="text-gray mb-0">The total number of sessions</p>
    </div>
    <div class="events pt-4 px-3">
        <div class="wrapper d-flex mb-2">
            <i class="ti-control-record text-primary me-2"></i>
            <span>Feb 7 2018</span>
        </div>
        <p class="mb-0 font-weight-thin text-gray">Meeting with Alisa</p>
        <p class="text-gray mb-0 ">Call Sarah Graves</p>
    </div>
    </div>
    <!-- To do section tab ends -->
    <div class="tab-pane fade" id="chats-section" role="tabpanel" aria-labelledby="chats-section">
        <div class="d-flex align-items-center justify-content-between border-bottom">
            <p class="settings-heading border-top-0 mb-3 pl-3 pt-0 border-bottom-0 pb-0">Friends</p>
            <small class="settings-heading border-top-0 mb-3 pt-0 border-bottom-0 pb-0 pr-3 fw-normal">See All</small>
        </div>
        <ul class="chat-list">
            <li class="list active">
                <div class="profile"><img src="../../images/faces/face1.jpg" alt="image"><span class="online"></span></div>
                <div class="info">
                    <p>Thomas Douglas</p>
                    <p>Available</p>
                </div>
                <small class="text-muted my-auto">19 min</small>
            </li>
            <li class="list">
                <div class="profile"><img src="../../images/faces/face2.jpg" alt="image"><span class="offline"></span></div>
                <div class="info">
                    <div class="wrapper d-flex">
                        <p>Catherine</p>
                    </div>
                    <p>Away</p>
                </div>
                <div class="badge badge-success badge-pill my-auto mx-2">4</div>
                <small class="text-muted my-auto">23 min</small>
            </li>
            <li class="list">
                <div class="profile"><img src="../../images/faces/face3.jpg" alt="image"><span class="online"></span></div>
                <div class="info">
                    <p>Daniel Russell</p>
                    <p>Available</p>
                </div>
                <small class="text-muted my-auto">14 min</small>
            </li>
            <li class="list">
                <div class="profile"><img src="../../images/faces/face4.jpg" alt="image"><span class="offline"></span></div>
                <div class="info">
                    <p>James Richardson</p>
                    <p>Away</p>
                </div>
                <small class="text-muted my-auto">2 min</small>
            </li>
            <li class="list">
                <div class="profile"><img src="../../images/faces/face5.jpg" alt="image"><span class="online"></span></div>
                <div class="info">
                    <p>Madeline Kennedy</p>
                    <p>Available</p>
                </div>
                <small class="text-muted my-auto">5 min</small>
            </li>
            <li class="list">
                <div class="profile"><img src="../../images/faces/face6.jpg" alt="image"><span class="online"></span></div>
                <div class="info">
                    <p>Sarah Graves</p>
                    <p>Available</p>
                </div>
                <small class="text-muted my-auto">47 min</small>
            </li>
        </ul>
    </div>
    <!-- chat tab ends -->
    </div>
    </div>
    <!-- partial -->
    <!-- partial:../../partials/_sidebar.html -->
    <%- include('./partials/_sidebar.html'); %>
    <!-- partial -->
    <div class="main-panel">
        <div class="content-wrapper">
            <div class="row h-100 justify-content-center align-items-center">
                <div class="col-md-12 col-lg-10 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title text-center">Check Registration Status</h4>
                            <p class="card-description text-center"><code style="font-size: 30px;"><script>document.write(new Date().getFullYear())</script> </code> </p>

                            <div class="row">
                                <div class="col-md-12 mx-auto">
                                    <ul class="nav nav-pills nav-pills-custom justify-content-center" id="pills-tab-custom" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="pills-home-tab-custom" data-bs-toggle="pill" href="#pills-health" role="tab" aria-controls="pills-home" aria-selected="true">
                          By Church
                        </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="pills-profile-tab-custom" data-bs-toggle="pill" href="#pills-career" role="tab" aria-controls="pills-profile" aria-selected="false">
                          By Delegate
                        </a>
                                        </li>

                                    </ul>
                                    <% if (locals.message) { %>
                                    <div class="alert alert-success alert-dismissible fade show mt-3" role="alert">
                                        <strong><%= message %></strong>
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                    </div>
                                    <% } %>
                                    <div class="tab-content tab-content-custom-pill" id="pills-tabContent-custom">
                                        <div class="tab-pane fade show active" id="pills-health" role="tabpanel" aria-labelledby="pills-home-tab-custom">

                                            <form class="forms-sample" method="post" action="/reg-status">
                                                <div class="row">
                                                    <div class="col-md-10 col-sm-10 col-lg-10">
                                                        <div class="form-group">
                                                            <label for="exampleInputUsername1">Click to select church </label>
                                                            <input list="churches" id="church" class="form-control form-control-sm" placeholder="Select Church" name="church" />
                                                            <input class="form-control form-control-sm" id="cid1" style="display: none;" name="church_id" />
                                                            <datalist id="churches">
                                                                <% churches.forEach(function(church){ %>
                                                                <option value="<%= church.name %> <%= church.city %>" data-value="<%= church.id %>">
                                                                <% }) %>
                                                            </datalist>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2 col-sm-2 col-lg-2 mt-4">
                                                        <button type="submit" class="btn btn-primary ">Search</button>
                                                    </div>
                                                </div>
                                            </form>

                                            <div class="row flex-grow">
                                                <div class="col-12 grid-margin stretch-card">
                                                    <div class="card card-rounded">
                                                        <div class="card-body">
                                                            <!-- <div class="d-sm-flex justify-content-between align-items-start">
                                  <div>
                                    <h4 class="card-title card-title-dash">Product Overview</h4>
                                  </div>
                                  <div>
                                    <p>13/03/2018 to 20/03/2018</p>
                                  </div>
                                </div> -->
                                                            <div class="table-responsive mt-4">
                                                                <table class="table select-table" id="to-pdf-table">
                                                                    <thead>
                                                                        <tr style="text-transform: uppercase;">
                                                                            <td align="center">
                                                                                <p class="dark-text"><b style="font-size: 14px;">Delegate</b></p>
                                                                                </th>
                                                                                <td align="center">
                                                                                    <p class="dark-text"><b style="font-size: 14px;">Hall Name</b></p>
                                                                                    </th>
                                                                                    <td align="center">
                                                                                        <p class="dark-text"><b style="font-size: 14px;">Room</b></p>
                                                                                        </th>
                                                                                        <td align="center">
                                                                                            <p class="dark-text"><b style="font-size: 14px;">Preview Registration Card</b></p>
                                                                                            </th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <% if(locals.conventionRegistrationsChurch){ %>
                                                                        <% locals.conventionRegistrations.forEach(function(conventionReg){ %>
                                                                        <tr>
                                                                            <td align="center">
                                                                                <p class="dark-text"><%= conventionReg.delegate?.surname %> <%= conventionReg.delegate?.firstname %> <%= conventionReg.delegate?.middlename %></p>
                                                                            </td>
                                                                            <td align="center">
                                                                                <% if(conventionReg.delegate?.registration_cards[0]){ %>
                                                                                <p class="dark-text"><%= conventionReg.delegate?.registration_cards[0].hall %></p>
                                                                                <% }else{ %>
                                                                                <p class="dark-text">Not Assigned</p>
                                                                                <% } %>
                                                                            </td>
                                                                            <td align="center">
                                                                                <% if(conventionReg.delegate?.registration_cards[0]){ %>
                                                                                <p class="dark-text"><%= conventionReg.delegate?.registration_cards[0].room_no %></p>
                                                                                <% }else{ %>
                                                                                <p class="dark-text">Not Assigned</p>
                                                                                <% } %>
                                                                            </td>
                                                                            <td align="center">
                                                                                <p class="dark-text" role="button" data-toggle="modal" data-target="#Modal<%= conventionReg.id %>">Display Registration Card</p>
                                                                            </td>

                                                                            <!-- Modal -->
                                                                            <div class="modal fade" id="Modal<%= conventionReg.id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                            <div class="modal-dialog" role="document">
                                                                                <div class="modal-content">
                                                                                <div class="modal-body">
                                                                                    <div class="border border-dark" id="idcard<%= conventionReg.id %>">
                                                                                        <div class="p-4">
                                                                                            <div class="d-flex justify-content-between align-items-center flex-row pb-4">
                                                                                                <!-- <img class="img-responsive w-25" src="/images/placeholder.svg" alt=""> -->
                                                                                                <div class="font-weight-semibold w-50 text-center mx-auto" style="font-size: x-large;">
                                                                                                    Delegate's Card 
                                                                                                </div>
                                                                                                <!-- <img class="img-responsive w-25" src="/images/placeholder.svg" alt=""> -->
                                                                                            </div>
                                                                                            <div class="d-flex flex-column text-center" style="font-size: larger;">
                                                                                                <div class="mb-3">Belivers Convention <script>document.write(new Date().getFullYear())</script></div>
                                                                                                <div class="mb-3"><%= conventionReg.delegate?.surname %> <%= conventionReg.delegate?.firstname %> <%= conventionReg.delegate?.middlename %></div>
                                                                                                <div class="mb-3"><%= conventionReg.church?.name %></div>
                                                                                            </div>
                                                                                            <div class="d-flex flex-column justify-content-between align-items-center">
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Registration No.: </div>
                                                                                                    <div><%= conventionReg.id %></div>
                                                                                                </div>
                                                                                                <% if(conventionReg.delegate?.registration_cards[0]){ %>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Hall: </div>
                                                                                                    <div><%= conventionReg.delegate?.registration_cards[0].hall %></div>
                                                                                                </div>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Room No.: </div>
                                                                                                    <div><%= conventionReg.delegate?.registration_cards[0].room_no %></div>
                                                                                                </div>
                                                                                                <% }else{ %>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Hall: </div>
                                                                                                    <div>Not yet assigned</div>
                                                                                                </div>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Room No.: </div>
                                                                                                    <div>Not yet assigned</div>
                                                                                                </div>
                                                                                                <% } %>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                                                    <button type="button" class="btn btn-primary" onclick="printIDCardPDF('<%= conventionReg.id %>')">Download Card</button>
                                                                                </div>
                                                                                </div>
                                                                            </div>
                                                                            </div>
                                                                        </tr>
                                                                        <% if(conventionReg.sister_with_children == 'Yes'){ %>
                                                                            <tr>
                                                                               <td align="center" colspan="4"> <p class="dark-text font-weight-semibold"><%= conventionReg.delegate?.surname %>'s Children</p> 
                                                                                </td>
                                                                            </tr>
                                                                        <% conventionReg.delegate?.children.forEach(function(child, i){ %>
                                                                            <tr>
                                                                            <td>
                                                                                <p class="dark-text"><%= i+1 %>: <%= child?.surname %> <%= child?.firstname %> <%= child?.middlename %></p>
                                                                            </td>
                                                                            <td align="center">
                                                                                <% if(child?.registration_cards[0]){ %>
                                                                                <p class="dark-text"><%= child?.registration_cards[0].hall %></p>
                                                                                <% }else{ %>
                                                                                <p class="dark-text">Not Assigned</p>
                                                                                <% } %>
                                                                            </td>
                                                                            <td align="center">
                                                                                <% if(child?.registration_cards[0]){ %>
                                                                                <p class="dark-text"><%= child?.registration_cards[0].room_no %></p>
                                                                                <% }else{ %>
                                                                                <p class="dark-text">Not Assigned</p>
                                                                                <% } %>
                                                                            </td>
                                                                            <td align="center">
                                                                                <p class="dark-text" role="button" data-toggle="modal" data-target="#Modal<%= conventionReg.id %>">Display Registration Card</p>
                                                                            </td>

                                                                            <!-- Modal -->
                                                                            <div class="modal fade" id="Modal<%= conventionReg.id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                            <div class="modal-dialog" role="document">
                                                                                <div class="modal-content">
                                                                                <div class="modal-body">
                                                                                    <div class="border border-dark" id="idcard<%= conventionReg.id %>">
                                                                                        <div class="p-4">
                                                                                            <div class="d-flex justify-content-between align-items-center flex-row pb-4">
                                                                                                <!-- <img class="img-responsive w-25" src="/images/placeholder.svg" alt=""> -->
                                                                                                <div class="font-weight-semibold w-50 text-center mx-auto" style="font-size: x-large;">
                                                                                                    Delegate's Card 
                                                                                                </div>
                                                                                                <!-- <img class="img-responsive w-25" src="/images/placeholder.svg" alt=""> -->
                                                                                            </div>
                                                                                            <div class="d-flex flex-column text-center" style="font-size: larger;">
                                                                                                <div class="mb-3">Belivers Convention <script>document.write(new Date().getFullYear())</script></div>
                                                                                                <div class="mb-3"><%= child?.surname %> <%= child?.firstname %> <%= child?.middlename %></div>
                                                                                                <div class="mb-3"><%= conventionReg.church?.name %></div>
                                                                                            </div>
                                                                                            <div class="d-flex flex-column justify-content-between align-items-center">
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Registration No.: </div>
                                                                                                    <div><%= conventionReg.id %></div>
                                                                                                </div>
                                                                                            <% if(child?.registration_cards[0]){ %>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Hall: </div>
                                                                                                    <div><%= child?.registration_cards[0].hall %></div>
                                                                                                </div>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Room No.: </div>
                                                                                                    <div><%= child?.registration_cards[0].room_no %></div>
                                                                                                </div>
                                                                                                <% }else{ %>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Hall: </div>
                                                                                                    <div>Not yet assigned</div>
                                                                                                </div>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Room No.: </div>
                                                                                                    <div>Not yet assigned</div>
                                                                                                </div>
                                                                                                <% } %>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                                                    <button type="button" class="btn btn-primary" onclick="printIDCardPDF('<%= conventionReg.id %>')">Download Card</button>
                                                                                </div>
                                                                                </div>
                                                                            </div>
                                                                            </div>
                                                                        </tr>
                                                                        <% }) %>
                                                                        <% } %>
                                                                        <% }) %>
                                                                        <% } %>
                                                                        
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                            <button style="align-items: center;" class="btn btn-primary me-2 mt-3" id="download-pdf-btn" type="submit">Download PDF</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <!-- <button class="btn btn-light">Cancel</button> -->
                                        <!-- GROUP -->

                                        <div class="tab-pane fade" id="pills-career" role="tabpanel" aria-labelledby="pills-profile-tab-custom">
                                            <form class="forms-sample" method="post" action="/reg-status">
                                                <div class="row">
                                                    <div class="col-md-10 col-sm-10 col-lg-10">
                                                        <div class="form-group">
                                                            <div class="form-group">
                                                                <label for="exampleInputUsername1">FullName</label>
                                                                <input list="delegates" id="delegate" class="form-control form-control-sm" placeholder="Search Delegate Name" name="delegate" />
                                                                <input  id="did" class="form-control form-control-sm d-none"  style="display: none;" placeholder="Search Delegate Name" name="delegate_id" />
                                                                <datalist id="delegates">
                                                                    <% delegates.forEach(function(delegate){ %>
                                                                        <% if (delegate.middlename) { %>
                                                                            <option value="<%= delegate.surname %> <%= delegate.firstname %> <%= delegate.middlename %>" data-value="<%= delegate.id %>">
                                                                        <% } else { %>
                                                                            <option value="<%= delegate.surname %> <%= delegate.firstname %>" data-value="<%= delegate.id %>">
                                                                        <% } %>
                                                                    <% }) %>
                                                                </datalist>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2 col-sm-2 col-lg-2 mt-4">
                                                        <button type="submit" class="btn btn-primary ">Search</button>
                                                    </div>
                                                </div>
                                            </form>

                                            <div class="row flex-grow">
                                                <div class="col-12 grid-margin stretch-card">
                                                    <div class="card card-rounded">
                                                        <div class="card-body">
                                                            <!-- <div class="d-sm-flex justify-content-between align-items-start">
                                  <div>
                                    <h4 class="card-title card-title-dash">Product Overview</h4>
                                  </div>
                                  <div>
                                    <p>13/03/2018 to 20/03/2018</p>
                                  </div>
                                </div> -->
                                                            <div class="table-responsive ">
                                                                <table class="table select-table">
                                                                    <thead>
                                                                        <tr style="text-transform: uppercase;">
                                                                            <td align="center">
                                                                                <p class="dark-text"><b style="font-size: 14px;">Delegate</b></p>
                                                                                </th>
                                                                                <td align="center">
                                                                                    <p class="dark-text"><b style="font-size: 14px;">Hall Name</b></p>
                                                                                    </th>
                                                                                    <td align="center">
                                                                                        <p class="dark-text"><b style="font-size: 14px;">Room</b></p>
                                                                                        </th>
                                                                                        <td align="center">
                                                                                            <p class="dark-text"><b style="font-size: 14px;">Preview Registration Card</b></p>
                                                                                            </th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <% if(locals.conventionRegistrationsDelegate){ %>
                                                                        <% locals.conventionRegistrations.forEach(function(conventionReg){ %>
                                                                        <tr>
                                                                            <td align="center">
                                                                                <p class="dark-text"><%= conventionReg.delegate?.surname %> <%= conventionReg.delegate?.firstname %> <%= conventionReg.delegate?.middlename %></p>
                                                                            </td>
                                                                            <td align="center">
                                                                                <% if(conventionReg.delegate?.registration_cards[0]){ %>
                                                                                <p class="dark-text"><%= conventionReg.delegate?.registration_cards[0].hall %></p>
                                                                                <% }else{ %>
                                                                                <p class="dark-text">Not Assigned</p>
                                                                                <% } %>
                                                                            </td>
                                                                            <td align="center">
                                                                                <% if(conventionReg.delegate?.registration_cards[0]){ %>
                                                                                <p class="dark-text"><%= conventionReg.delegate?.registration_cards[0].room_no %></p>
                                                                                <% }else{ %>
                                                                                <p class="dark-text">Not Assigned</p>
                                                                                <% } %>
                                                                            </td>
                                                                            <td align="center">
                                                                                <p class="dark-text" role="button" data-toggle="modal" data-target="#Modal<%= conventionReg.id %>">Display Registration Card</p>
                                                                            </td>
                                                                            <!-- Modal -->
                                                                            <div class="modal fade" id="Modal<%= conventionReg.id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                            <div class="modal-dialog" role="document">
                                                                                <div class="modal-content">
                                                                                <div class="modal-body">
                                                                                    <div class="border border-dark" id="idcard<%= conventionReg.id %>">
                                                                                        <div class="p-4">
                                                                                            <div class="d-flex justify-content-between align-items-center flex-row pb-4">
                                                                                                <!-- <img class="img-responsive w-25" src="/images/placeholder.svg" alt=""> -->
                                                                                                <div class="font-weight-semibold w-50 text-center mx-auto" style="font-size: larger;">
                                                                                                    Delegate's Card 
                                                                                                </div>
                                                                                                <!-- <img class="img-responsive w-25" src="/images/placeholder.svg" alt=""> -->
                                                                                            </div>
                                                                                            <div class="d-flex flex-column text-center" style="font-size: larger;">
                                                                                                <div class="mb-3">Belivers Convention <script>document.write(new Date().getFullYear())</script></div>
                                                                                                <div class="mb-3"><%= conventionReg.delegate?.surname %> <%= conventionReg.delegate?.firstname %> <%= conventionReg.delegate?.middlename %></div>
                                                                                                <div class="mb-3"><%= conventionReg.church?.name %></div>
                                                                                            </div>
                                                                                            <div class="d-flex flex-column justify-content-between align-items-center">
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Registration No.: </div>
                                                                                                    <div><%= conventionReg.id %></div>
                                                                                                </div>
                                                                                                <% if(conventionReg.delegate?.registration_cards[0]){ %>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Hall: </div>
                                                                                                    <div><%= conventionReg.delegate?.registration_cards[0].hall %></div>
                                                                                                </div>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Room No.: </div>
                                                                                                    <div><%= conventionReg.delegate?.registration_cards[0].room_no %></div>
                                                                                                </div>
                                                                                                <% }else{ %>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Hall: </div>
                                                                                                    <div>Not yet assigned</div>
                                                                                                </div>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Room No.: </div>
                                                                                                    <div>Not yet assigned</div>
                                                                                                </div>
                                                                                                <% } %>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                                                    <button type="button" class="btn btn-primary" onclick="printIDCardPDF('<%= conventionReg.id %>')">Download Card</button>
                                                                                </div>
                                                                                </div>
                                                                            </div>
                                                                            </div>
                                                                        </tr>
                                                                        <% if(conventionReg.sister_with_children == 'Yes'){ %>
                                                                            <tr>
                                                                               <td align="center" colspan="4"> <p class="dark-text font-weight-semibold"><%= conventionReg.delegate?.surname %>'s Children</p> 
                                                                                </td>
                                                                            </tr>
                                                                        <% conventionReg.delegate?.children.forEach(function(child, i){ %>
                                                                            <tr>
                                                                            <td>
                                                                                <p class="dark-text"><%= i+1 %>: <%= child?.surname %> <%= child?.firstname %> <%= child?.middlename %></p>
                                                                            </td>
                                                                            <td align="center">
                                                                                <% if(child?.registration_cards[0]){ %>
                                                                                <p class="dark-text"><%= child?.registration_cards[0].hall %></p>
                                                                                <% }else{ %>
                                                                                <p class="dark-text">Not Assigned</p>
                                                                                <% } %>
                                                                            </td>
                                                                            <td align="center">
                                                                                <% if(child?.registration_cards[0]){ %>
                                                                                <p class="dark-text"><%= child?.registration_cards[0].room_no %></p>
                                                                                <% }else{ %>
                                                                                <p class="dark-text">Not Assigned</p>
                                                                                <% } %>
                                                                            </td>
                                                                            <td align="center">
                                                                                <p class="dark-text" role="button" data-toggle="modal" data-target="#Modal<%= conventionReg.id %>">Display Registration Card</p>
                                                                            </td>

                                                                            <!-- Modal -->
                                                                            <div class="modal fade" id="Modal<%= conventionReg.id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                            <div class="modal-dialog" role="document">
                                                                                <div class="modal-content">
                                                                                <div class="modal-body">
                                                                                    <div class="border border-dark" id="idcard<%= conventionReg.id %>">
                                                                                        <div class="p-4">
                                                                                            <div class="d-flex justify-content-between align-items-center flex-row pb-4">
                                                                                                <!-- <img class="img-responsive w-25" src="/images/placeholder.svg" alt=""> -->
                                                                                                <div class="font-weight-semibold w-50 text-center mx-auto" style="font-size: x-large;">
                                                                                                    Delegate's Card 
                                                                                                </div>
                                                                                                <!-- <img class="img-responsive w-25" src="/images/placeholder.svg" alt=""> -->
                                                                                            </div>
                                                                                            <div class="d-flex flex-column text-center" style="font-size: larger;">
                                                                                                <div class="mb-3">Belivers Convention <script>document.write(new Date().getFullYear())</script></div>
                                                                                                <div class="mb-3"><%= child?.surname %> <%= child?.firstname %> <%= child?.middlename %></div>
                                                                                                <div class="mb-3"><%= conventionReg.church?.name %></div>
                                                                                            </div>
                                                                                            <div class="d-flex flex-column justify-content-between align-items-center">
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Registration No.: </div>
                                                                                                    <div><%= conventionReg.id %></div>
                                                                                                </div>
                                                                                                <% if(child?.registration_cards[0]){ %>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Hall: </div>
                                                                                                    <div><%= child?.registration_cards[0].hall %></div>
                                                                                                </div>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Room No.: </div>
                                                                                                    <div><%= child?.registration_cards[0].room_no %></div>
                                                                                                </div>
                                                                                                <% }else{ %>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Hall: </div>
                                                                                                    <div>Not yet assigned</div>
                                                                                                </div>
                                                                                                <div class="d-flex justify-content-between align-items-center w-75 mb-2">
                                                                                                    <div> Room No.: </div>
                                                                                                    <div>Not yet assigned</div>
                                                                                                </div>
                                                                                                <% } %>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                                                    <button type="button" class="btn btn-primary" onclick="printIDCardPDF('<%= conventionReg.id %>')">Download Card</button>
                                                                                </div>
                                                                                </div>
                                                                            </div>
                                                                            </div>
                                                                        </tr>
                                                                        <% }) %>
                                                                        <% } %>
                                                                        <% }) %>
                                                                        <% } %>
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                            <p class="text-gray mb-0 ">If your name is not on the list
                                                                <a href="delegate">click</a> here to add your bio data</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--vertical wizard-->

        </div>
        <!-- content-wrapper ends -->
        <!-- partial:../../partials/_footer.html -->
        <%- include('./partials/_footer.html'); %>
        <!-- partial -->
    </div>
    <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="../../vendors/js/vendor.bundle.base.js"></script>
    <script src="../../vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page-->
    <script src="../../vendors/jquery-steps/jquery.steps.min.js"></script>
    <script src="../../vendors/jquery-validation/jquery.validate.min.js"></script>
    <script src="/js/jspdf.umd.js"></script>
    <script src="/js/jspdf.plugin.autotable.js"></script>
    <script src="/js/html2canvas.min.js"></script>
    <!-- End plugin js for this page-->
    <!-- inject:js -->
    <script src="../../js/off-canvas.js"></script>
    <script src="../../js/hoverable-collapse.js"></script>
    <script src="../../js/formpickers.js"></script>
    <script src="../../js/template.js"></script>
    <script src="../../js/settings.js"></script>
    <script src="../../js/todolist.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page-->
    <script src="../../js/wizard.js"></script>
    

    <script>
    $("#download-pdf-btn").click(function() {
        var doc = new jspdf.jsPDF();
        var elementHTML = document.querySelector("#to-pdf-table");
        doc.html(elementHTML, {
          callback: function (doc) {
            // Save the PDF
            doc.save(`file-blv-${Date.now()}.pdf`);
          },
          margin: [10, 10, 10, 10],
          autoPaging: "text",
          x: 0,
          y: 0,
          width: 190, // Target width in the PDF document
          windowWidth: 675, // Window width in CSS pixels
        });
      });

      function printIDCardPDF(id){
        var doc = new jspdf.jsPDF();
        var elementHTML = document.querySelector(`#idcard${id}`);
        doc.html(elementHTML, {
          callback: function (doc) {
            // Save the PDF
            doc.save(`conv-idcard-blv-${id}-${new Date().getFullYear()}.pdf`);
          },
          margin: [10, 10, 10, 10],
          autoPaging: "text",
          x: 0,
          y: 0,
          width: 190, // Target width in the PDF document
          windowWidth: 675, // Window width in CSS pixels
        });
      }

      document.getElementById("delegate").addEventListener("change", (e) => {
            const delel = document.querySelector(`[value="${e.target.value.trim()}"]`).getAttribute("data-value");
            // console.log(delel)
            document.getElementById("did").value = delel;
        })
        document.getElementById("church").addEventListener("change", (e) => {
            const cid = document.querySelector(`[value="${e.target.value.trim()}"]`).getAttribute("data-value");
            // console.log(cid)
            document.getElementById("cid1").value = cid;
        })
    </script>

</body>



</html>